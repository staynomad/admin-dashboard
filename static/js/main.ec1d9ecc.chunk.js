(this["webpackJsonpadmin-dashboard"]=this["webpackJsonpadmin-dashboard"]||[]).push([[0],{88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(14),a=n.n(s),i=n(12),o=n(22),j=n(3),d=n(19),l=n.n(d),b=n(24),u=n(25),h=n.n(u),O=h.a.create({baseURL:"https://api.vhomesgroup.com"}),x=n.p+"static/media/nomad.71b300aa.svg",v=n(1),p=function(e){var t=e.setToken,n=Object(c.useState)(),r=Object(i.a)(n,2),s=r[0],a=r[1],o=function(){var e=Object(b.a)(l.a.mark((function e(n){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O.post("/adminVerify",{password:s});case 3:if(!(c=e.sent)||200!==c.status){e.next=11;break}return r=c.data.token,t(r),h.a.defaults.headers.common.Authorization="Bearer ".concat(r),e.abrupt("return");case 11:alert("Password is incorrect!");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"password-page-screen",children:Object(v.jsxs)("form",{className:"password-page-container",onSubmit:o,children:[Object(v.jsx)("img",{src:x,alt:""}),Object(v.jsx)("h1",{children:"Password"}),Object(v.jsx)("input",{type:"password",onChange:function(e){return a(e.target.value)},placeholder:"Admin Password"}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{type:"submit",children:"Login"})})]})})},f=function(){return Object(v.jsxs)("div",{className:"navbar-container",children:[Object(v.jsx)("img",{src:x,alt:""}),Object(v.jsxs)("div",{className:"navbar-links",children:[Object(v.jsx)(o.b,{to:"/",children:"Dashboard"}),Object(v.jsx)(o.b,{to:"/reservations",children:"Reservations"})]})]})},m=function(){return Object(v.jsxs)("div",{className:"dashboard-screen",children:[Object(v.jsx)(f,{}),Object(v.jsx)("h3",{children:"Dashboard"})]})},g=n(28),k=n.n(g),w=n(33),N=n.n(w),P=n(105),S=n(51),y=n.n(S),D=n(50),A=n.n(D),F=n(106),C=function(e){for(var t=e.itemsPerPage,n=e.totalItems,c=e.paginate,r=e.pageNumber,s=[],a=1;a<=Math.ceil(n/t);a++)s.push(a);return Object(v.jsx)("div",{className:"pagination-container",children:Object(v.jsx)(F.a,{count:s.length,page:r,onChange:function(e,t){c(t)}})})},Y=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),a=Object(i.a)(s,2),o=a[0],j=a[1],d=Object(c.useState)(null),u=Object(i.a)(d,2),h=u[0],x=u[1],p=Object(c.useState)([]),m=Object(i.a)(p,2),g=m[0],w=m[1],S=Object(c.useState)(1),D=Object(i.a)(S,2),F=D[0],Y=D[1],I=Object(c.useState)(20),T=Object(i.a)(I,1)[0];Object(c.useEffect)((function(){(function(){var e=Object(b.a)(l.a.mark((function e(){var t,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/reservation");case 2:t=e.sent,n=t.data.reservations,c=0;case 5:if(!(c<n.length)){e.next=14;break}if(void 0===n[c].user){e.next=11;break}return e.next=9,O.get("/user/getUserInfo/".concat(n[c].user));case 9:s=e.sent,n[c].email=s.data.email;case 11:c++,e.next=5;break;case 14:r(n);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(c.useEffect)((function(){var e=F*T,t=e-T;w(N.a.orderBy(n,[function(e){return new Date(e.createdAt)}],["desc"]).filter((function(e){return e.active===(null===h?e.active:!0===h)})).slice(t,e))}),[n,h,F]),Object(c.useEffect)((function(){Y(1)}),[h]),Object(v.jsxs)("div",{className:"reservations-page-screen",children:[Object(v.jsx)(f,{}),Object(v.jsxs)("div",{className:"reservations-container",children:[Object(v.jsxs)("div",{className:"reservations-container-header",children:[Object(v.jsx)("h1",{children:"Reservations"}),Object(v.jsx)(P.a,{onClickAway:function(){return j(!1)},children:Object(v.jsxs)("div",{style:{position:"relative"},children:[Object(v.jsxs)("div",{onClick:function(){return j(!o)},className:"reservations-dropdown-button",children:[Object(v.jsx)("p",{children:"Filter: ".concat(null===h?"All":!0===h?"Active":"Expired")}),o?Object(v.jsx)(A.a,{}):Object(v.jsx)(y.a,{})]}),o&&Object(v.jsxs)("div",{className:"reservations-dropdown-container",children:[Object(v.jsx)("div",{className:"reservation-dropdown-option",onClick:function(){j(!1),x(null)},children:Object(v.jsx)("p",{children:"All"})}),Object(v.jsx)("div",{className:"reservation-dropdown-option",onClick:function(){j(!1),x(!0)},children:Object(v.jsx)("p",{children:"Active"})}),Object(v.jsx)("div",{className:"reservation-dropdown-option",onClick:function(){j(!1),x(!1)},children:Object(v.jsx)("p",{children:"Expired"})})]})]})})]}),Object(v.jsx)("div",{className:"reservations-table-container",children:Object(v.jsxs)("table",{children:[Object(v.jsxs)("tr",{className:"reservations-table-header",children:[Object(v.jsx)("th",{children:"Date"}),Object(v.jsx)("th",{children:"Reservation ID"}),Object(v.jsx)("th",{children:"Listing"}),Object(v.jsx)("th",{children:"Total"}),Object(v.jsx)("th",{children:"After Stripe"}),Object(v.jsx)("th",{children:"Host Payout"}),Object(v.jsx)("th",{children:"Profit"}),Object(v.jsx)("th",{children:"Reservation Dates"}),Object(v.jsx)("th",{children:"User"}),Object(v.jsx)("th",{children:"Active"})]}),n.length>0&&N.a.orderBy(g,[function(e){return new Date(e.createdAt)}],["desc"]).map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:k()(e.createdAt).calendar()}),Object(v.jsx)("td",{children:e._id}),Object(v.jsx)("td",{children:Object(v.jsx)("a",{href:"https://www.visitnomad.com/listing/".concat(e.listing),target:"_blank",children:"visitnomad.com"})}),Object(v.jsxs)("td",{children:["$",e.totalPrice]}),Object(v.jsxs)("td",{children:["$",e.totalPrice-.03*e.totalPrice]}),Object(v.jsxs)("td",{children:["$",(e.totalPrice-.03*e.totalPrice-e.hostFee-e.guestFee).toFixed(2)]}),Object(v.jsxs)("td",{children:["$",(e.totalPrice-.03*e.totalPrice-(e.totalPrice-.03*e.totalPrice-e.hostFee-e.guestFee)).toFixed(2)]}),Object(v.jsx)("td",{children:"".concat(k()(e.days[0]).format("MM[/]DD[/]YYYY")," to ").concat(k()(e.days[1]).format("MM[/]DD[/]YYYY"))}),Object(v.jsx)("td",{children:e.email}),Object(v.jsx)("td",{children:e.active?"Yes":"No"})]},e._id)}))]})}),Object(v.jsx)("div",{className:"reservations-pagination-container",children:Object(v.jsx)(C,{itemsPerPage:T,totalItems:n.filter((function(e){return e.active===(null===h?e.active:!0===h)})).length,paginate:function(e){Y(e)},pageNumber:F})})]})]})};n(88);var I=function(){var e=function(){var e=Object(c.useState)(function(){var e=localStorage.getItem("token");return JSON.parse(e)}()),t=Object(i.a)(e,2),n=t[0],r=t[1];return{setToken:function(e){localStorage.setItem("token",JSON.stringify(e)),r(e)},token:n}}(),t=e.token,n=e.setToken;return t?Object(v.jsx)("div",{children:Object(v.jsx)(o.a,{children:Object(v.jsxs)(j.c,{children:[Object(v.jsx)(j.a,{path:"/",exact:!0,component:m}),Object(v.jsx)(j.a,{path:"/reservations",exact:!0,component:Y})]})})}):Object(v.jsx)(p,{setToken:n})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,109)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(I,{})}),document.getElementById("root")),T()}},[[89,1,2]]]);
//# sourceMappingURL=main.ec1d9ecc.chunk.js.map